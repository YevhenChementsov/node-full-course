**Читать на других языках: [Українська](./docs/README.ua.md),
[English](./docs/README.en.md).**

# Загрузка файлов (аватарки) пользователя через Multer.

---

Добавление возможности загрузки аватарки пользователя через multer. Генерация
стандартной аватарки при регистрации нового пользователя с помощью библиотеки
gravatar. Добавление и обновление размера аватарки с пакетом jimp. Написание
unit-тестов для контроллера входа (login/signin) с jest.

---

### 1. Настройка Express на раздачу статических файлов.

1.1. Создается папка **public** для раздачи статики. В этой папке создается
папка **avatars**.

> Важно! Так как пустую папку на гит запушить нельзя, в папке **public/avatars**
> нужно создать файл _`.gitkeep`_.

1.2. Настраивается `Express` на раздачу статических файлов из папки **public**.
Для этого в _`app.js`_ добавляется мидлвар `app.use(express.static('public'));`.

1.3. Для проверки, что раздача статики работает, ложится любое изображение в
папку **public/avatars**. При переходе по такому URL браузер отобразит
изображение.

```js
http://localhost:<порт>/avatars/<имя файла с расширением>
```

---

### 2. Генерация аватара с gravatar.

2.1. В схему пользователя добавляется новое свойство avatarURL для хранения
изображения.

```js
...
avatarURL: {
	type: String,
	required: true,
},
...
```

2.2. Для того чтобы при регистрации нового пользователя сразу сгенерировать ему
аватар по его email используется библиотека
[gravatar](https://www.npmjs.com/package/gravatar).

2.3. Во время создания пользователя, `url`, полученный с помощью `gravatar`,
сохраняется в поле _`avatarURL`_.

---

### 3. Обновление аватарки пользователем. Кастомизация аватара с пакетом jimp.

---

## Дополнительное задание

---

### 4. Unit-тестирование контроллера входа (signIn).
